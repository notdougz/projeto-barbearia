{% extends 'agendamentos/base.html' %}
{% block title %}Meus Clientes - Dashboard{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2><span class="icon icon-users"></span>Meus Clientes</h2>
    <a href="{% url 'criar_cliente' %}" class="btn btn-success"><span class="icon icon-add"></span>Adicionar Novo Cliente</a>
</div>

{% if clientes %}
  <div class="mobile-appointments">
    {% for cliente in clientes %}
    <div class="appointment-card">
      <div class="appointment-header">
        <div class="appointment-main-info">
          <div class="appointment-client-name">{{ cliente.nome }}</div>
        </div>
      </div>
      
      <div class="appointment-info">
        <div class="appointment-info-row">
          <span class="appointment-info-label">
            <span class="icon icon-phone"></span>Telefone:
          </span>
          <span class="appointment-info-value">
            {% if cliente.telefone %}
              <a href="tel:{{ cliente.telefone }}">{{ cliente.telefone }}</a>
            {% else %}
              -
            {% endif %}
          </span>
        </div>
        
        {% if cliente.endereco %}
        <div class="appointment-info-row">
          <span class="appointment-info-label">
            <span class="icon icon-location"></span>Endere√ßo:
          </span>
          <span class="appointment-info-value">
            <a href="https://www.google.com/maps/search/?api=1&query={{ cliente.endereco }}" target="_blank">
              {{ cliente.endereco|truncatechars:40 }}
            </a>
          </span>
        </div>
        {% endif %}
      </div>
      
      <div class="appointment-actions">
        <a href="{% url 'editar_cliente' cliente.pk %}" class="btn btn-sm btn-secondary" style="flex: 1;">
          <span class="icon icon-edit"></span>Editar
        </a>
        <a href="{% url 'deletar_cliente' cliente.pk %}" class="btn btn-sm btn-danger" style="flex: 1;">
          <span class="icon icon-delete"></span>Excluir
        </a>
      </div>
    </div>
    {% endfor %}
  </div>
{% else %}
  <div class="no-appointments" style="text-align: center; padding: 2rem; color: var(--text-secondary);">
    <div style="font-size: 3rem; margin-bottom: 1rem;"><span class="icon icon-users" style="font-size: 3rem; color: var(--text-secondary);"></span></div>
    <p>Nenhum cliente cadastrado ainda.</p>
    <a href="{% url 'criar_cliente' %}" class="btn btn-success"><span class="icon icon-add"></span>Cadastrar Primeiro Cliente</a>
  </div>
{% endif %}
{% endblock %}